import{a as H,r as s,w as K,j as e,V as I,B as k,y as d,T as L,aY as O,ah as V,a2 as J,a3 as W}from"./index-d0bb2854.js";import{L as Y}from"./chunk-JMCRK7ZE-6c950521.js";import{A as P}from"./chunk-VJ54TX72-910cf7bc.js";import{M as _,a as Q,b as X,c as Z,d as $,e as ee}from"./chunk-PVJ72NKC-aa1299e5.js";import{M as ae}from"./chunk-YLPWWAYV-3e832c2d.js";import{C as te}from"./chunk-3V5HNFOM-3d294e74.js";import{F as i}from"./chunk-IJBC3YLI-6ce3e25a.js";import{F as l}from"./chunk-RN6VKE3K-a344299b.js";import{S as ne}from"./chunk-GJO77I2I-6bc2c4b6.js";import{I as u}from"./chunk-GYFRIY2Z-bed9457d.js";import{T as re}from"./chunk-OEQDSMWZ-a5ca4fb9.js";import{I as se}from"./chunk-6XCF7NSR-7b933f42.js";import{I as ie}from"./chunk-J356FWKS-1260d6a8.js";import"./chunk-LB6CWFOC-afb3a818.js";import"./index-eaa72e81.js";const Se=()=>{const R=H(),[c,x]=s.useState({title:"",description:"",category:"Guía de plantas",imageUrlMiniatura:"",imageUrlPrincipal:"",youtubeLink:""}),[h,j]=s.useState(),[w,C]=s.useState(),[f,b]=s.useState(),[D,y]=s.useState(),[F,p]=s.useState(!1),{isOpen:T,onOpen:S,onClose:v}=K(),[M,A]=s.useState(),[o,m]=s.useState([{subtitulo:"",detalle:[""]}]),U=t=>{const a=[...o];a[t].detalle=[...a[t].detalle||[],""],m(a)},G=(t,a,n)=>{const r=[...o];r[t].detalle[a]=n,m(r)},N=(t,a,n)=>{const r=[...o];r[t][a]=n,m(r)},g=t=>{const{name:a,value:n}=t.target;x({...c,[a]:n})},B=t=>{const a=t.target.files?t.target.files[0]:null;if(a){j(a);const n=a.name;C(n)}},E=t=>{const a=t.target.files?t.target.files[0]:null;if(a){b(a);const n=a.name;y(n)}},q=async t=>{if(t.preventDefault(),p(!0),console.log(JSON.stringify(o,null,5)),h&&f)try{const a=await O(h,w,"blogFolder"),n=await O(f,D,"blogFolder"),r={...c,contenidos:o,imageUrlMiniatura:a,imageUrlPrincipal:n};await V(J(W,"blogPost"),r),p(!1),A(!0),S(),x({title:"",description:"",category:"Guía de plantas",imageUrlMiniatura:"",imageUrlPrincipal:"",youtubeLink:""}),m([{subtitulo:"",detalle:[""]}]),j(null),C(""),b(null),y("")}catch(a){console.error("Error al cargar la imagen:",a),p(!1),A(!1),S()}else p(!1)};return e.jsxs(I,{minH:"calc(100vh - 64px)",bgColor:"gray.100",p:4,children:[e.jsxs(k,{children:[e.jsx(d,{children:"CARGAR ARTICULO"}),e.jsx(d,{onClick:()=>R("/admin/blog-show"),children:"MOSTRAR ARTICULOS"})]}),e.jsx(e.Fragment,{children:e.jsxs(_,{onClose:v,isOpen:T,isCentered:!0,children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsx(Z,{children:M?"Publicado correctamente!":"Ocurrio un error"}),e.jsx(ae,{}),e.jsx($,{children:M?"Publicado correctamente en su blog!":"Ocurrio un error al intentar publicar!"}),e.jsx(ee,{children:e.jsx(d,{onClick:v,children:"Cerrar"})})]})]})}),e.jsx(te,{bg:"white",p:[6,8],borderRadius:"lg",w:["sm","md","xl","3xl"],children:e.jsx("form",{onSubmit:q,children:e.jsxs(I,{spacing:4,children:[e.jsx(L,{fontSize:"xl",as:"b",children:"CARGAR ARTICULO"}),e.jsxs(i,{style:{margin:"10px 0"},children:[e.jsx(l,{children:"Categoría"}),e.jsxs(ne,{name:"category",value:c.category,onChange:g,children:[e.jsx("option",{value:"Guía de plantas",children:"Guía de plantas"}),e.jsx("option",{value:"Cuidado de plantas",children:"Cuidado de plantas"}),e.jsx("option",{value:"Consejos y trucos",children:"Consejos y trucos"}),e.jsx("option",{value:"Conocimientos sobre plantas",children:"Conocimientos sobre plantas"})]})]}),e.jsxs(i,{style:{margin:"10px 0"},children:[e.jsx(l,{children:"Título"}),e.jsx(u,{type:"text",name:"title",value:c.title,onChange:g,required:!0})]}),e.jsxs(i,{style:{margin:"10px 0"},children:[e.jsx(l,{children:"Descripción"}),e.jsx(re,{name:"description",value:c.description,onChange:g,required:!0})]}),e.jsxs(i,{style:{margin:"10px 0"},children:[e.jsx(l,{children:"Seleccionar imagen miniatura"}),e.jsx(u,{type:"file",name:"imagenMiniatura",accept:".jpg, .jpeg, .png",onChange:B,required:!0})]}),e.jsxs(i,{style:{margin:"10px 0"},children:[e.jsx(l,{children:"Seleccionar imagen principal"}),e.jsx(u,{type:"file",name:"imagenPrincipal",accept:".jpg, .jpeg, .png",onChange:E,required:!0})]}),o.map((t,a)=>e.jsxs(k,{width:"100%",borderWidth:"1px",borderRadius:"md",p:"4",children:[e.jsxs(i,{style:{margin:"10px 0"},children:[e.jsx(l,{children:"Subtítulo"}),e.jsx(u,{type:"text",value:t.subtitulo,onChange:n=>N(a,"subtitulo",n.target.value)})]}),(t.detalle||[]).map((n,r)=>e.jsxs(i,{children:[e.jsx(l,{children:"Detalle"}),e.jsx(u,{type:"text",value:n,onChange:z=>G(a,r,z.target.value)})]},r)),e.jsx(d,{leftIcon:e.jsx(P,{}),colorScheme:"gray",variant:"outline",sx:{width:"100%"},onClick:()=>U(a),children:"Agregar detalle"})]},a)),e.jsx(d,{leftIcon:e.jsx(P,{}),colorScheme:"teal",variant:"outline",onClick:()=>m([...o,{subtitulo:"",detalle:[""]}]),sx:{width:"100%"},children:"Agregar contenido"}),e.jsxs(i,{style:{margin:"20px 0",marginTop:"30px"},children:[e.jsx(l,{children:"Link de video de youtube"}),e.jsxs(se,{children:[e.jsx(ie,{pointerEvents:"none",children:e.jsx(Y,{color:"black"})}),e.jsx(u,{type:"text",name:"youtubeLink",value:c.youtubeLink,onChange:g})]})]}),F?e.jsx(L,{fontSize:"xl",as:"b",children:"Cargando..."}):e.jsx(d,{colorScheme:"teal",sx:{width:"100%"},type:"submit",children:"Guardar artículo"})]})})})]})};export{Se as default};
