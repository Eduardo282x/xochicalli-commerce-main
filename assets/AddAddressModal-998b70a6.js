import{aJ as F,j as e,r as l,U as w,w as L,ac as T,aa as V,ab as c,y as b,a9 as f,T as R,aj as o,bu as k}from"./index-5960d643.js";import{u as N,o as O,F as n}from"./yup-fe7e9ae8.js";import{a as H}from"./axios-28bc18a3.js";import{A as U,a as W}from"./chunk-BPJV7R7V-da1dd8d6.js";import{a as Z,c as $,d as G,e as J}from"./chunk-PVJ72NKC-7f81f1a2.js";import{M as K}from"./chunk-YLPWWAYV-004e51a3.js";import{F as d}from"./chunk-IJBC3YLI-1dc0c5c2.js";import{F as m}from"./chunk-RN6VKE3K-17968694.js";import{I as p}from"./chunk-GYFRIY2Z-7c2e976d.js";import{S as P}from"./chunk-QJDVAY5Z-d77613cb.js";import{S as Q}from"./chunk-GJO77I2I-62895ca8.js";import"./chunk-LB6CWFOC-afb3a818.js";import"./index-eaa72e81.js";import"./chunk-5FO2ZLZM-ece85e28.js";var X=F({displayName:"SmallAddIcon",viewBox:"0 0 20 20",path:e.jsx("path",{fill:"currentColor",d:"M14 9h-3V6c0-.55-.45-1-1-1s-1 .45-1 1v3H6c-.55 0-1 .45-1 1s.45 1 1 1h3v3c0 .55.45 1 1 1s1-.45 1-1v-3h3c.55 0 1-.45 1-1s-.45-1-1-1z",fillRule:"evenodd"})});const ue=()=>{const{userInformation:g}=l.useContext(w),[u,C]=l.useState(""),[i,S]=l.useState(),[h,j]=l.useState({names:"",address:"",zip:"",state:"",city:"",colony:"",email:g.email}),z=l.useRef(),{isOpen:v,onClose:x,onOpen:q}=L(),E=T(),A=V().shape({names:c().required("El nombre es requerido").min(6,"El nombre debe tener al menos 6 caracteres"),address:c().required("La dirección es requerida").min(4,"La dirección debe tener al menos 4 caracteres"),zip:c().required("El código postal es requerido").min(5,"Debe ser de 5 dígitos"),state:c().required("El estado es requerido").min(4,"El estado debe tener al menos 4 caracteres"),city:c().required("La ciudad es requerida").min(4,"La ciudad debe tener al menos 4 caracteres"),colony:c().required("La ccolonia es requerida").min(4,"La colonia debe tener al menos 4 caracteres")}),{handleSubmit:I,register:t,formState:{errors:s,isSubmitting:B},reset:y}=N({resolver:O(A)}),M=async()=>{try{if(u.length===5){const{data:r}=await H.get("https://raw.githubusercontent.com/pulgueta/mxzip/main/mxzip.json");S(r[u])}}catch(r){console.log(r)}};l.useEffect(()=>{const r=setTimeout(M,500);return j(i?a=>({...a,zip:u,state:i.state||a.state,city:i.municipality||a.city,colony:i.neighborhoods[0]||a.colony}):a=>({...a,zip:u,state:"",city:"",colony:""})),()=>clearTimeout(r)},[u,i]);const D=async r=>{try{console.log(r),await k(r,g.uid),E({status:"success",duration:1e3,position:"top",title:"Dirección",description:"Tu dirección ha sido agregada."}),y(),x()}catch(a){throw Error(a,{cause:"error"})}};return e.jsxs(e.Fragment,{children:[e.jsx(b,{bgColor:"gray.50",p:8,rounded:"lg",border:"dotted",borderColor:"gray.100",onClick:()=>q(),children:e.jsxs(f,{align:"center",direction:"row",children:[e.jsx(X,{rounded:"full",boxSize:5,bgColor:"blue.400",color:"white"}),e.jsx(R,{children:"Agrega una dirección"})]})}),e.jsx(U,{isOpen:v,onClose:x,leastDestructiveRef:z,size:["sm","md","lg","2xl"],children:e.jsx(Z,{children:e.jsxs(W,{children:[e.jsx($,{fontSize:"lg",fontWeight:"bold",children:"Agregar una dirección"}),e.jsx(K,{onClick:()=>{x(),y()}}),e.jsxs("form",{onSubmit:I(D),children:[e.jsx(G,{children:e.jsxs(f,{spacing:{base:"6",md:"6"},children:[e.jsxs(d,{isInvalid:!!s.names,children:[e.jsx(m,{color:o("gray.700","gray.200"),children:"Nombres y apellidos"}),e.jsx(p,{placeholder:"Callie Nun",focusBorderColor:o("blue.500","blue.200"),...t("names")}),s.names&&e.jsx(n,{children:s.names.message})]}),e.jsxs(d,{isInvalid:!!s.address,children:[e.jsx(m,{color:o("gray.700","gray.200"),children:"Dirección completa"}),e.jsx(p,{placeholder:"123 Ejemplo St",focusBorderColor:o("blue.500","blue.200"),...t("address")}),s.address&&e.jsx(n,{children:s.address.message})]}),e.jsxs(P,{columns:[1,2],spacing:"6",children:[e.jsxs(d,{isInvalid:!!s.zip,maxW:32,children:[e.jsx(m,{color:o("gray.700","gray.200"),children:"Código postal"}),e.jsx(p,{placeholder:"03100",focusBorderColor:o("blue.500","blue.200"),...t("zip"),onChange:({target:r})=>C(r.value)}),s.zip&&e.jsx(n,{children:s.zip.message})]}),e.jsxs(d,{isInvalid:!!s.state,children:[e.jsx(m,{color:o("gray.700","gray.200"),children:"Estado"}),e.jsx(p,{defaultValue:h.state,placeholder:"Tamaulipas",focusBorderColor:o("blue.500","blue.200"),...t("state")}),s.state&&e.jsx(n,{children:s.state.message})]}),e.jsxs(d,{isInvalid:!!s.city,children:[e.jsx(m,{color:o("gray.700","gray.200"),children:"Ciudad"}),e.jsx(p,{defaultValue:h.city,placeholder:"Victoria",focusBorderColor:o("blue.500","blue.200"),...t("city")}),s.city&&e.jsx(n,{children:s.city.message})]}),e.jsxs(d,{isInvalid:!!s.colony,children:[e.jsx(m,{color:o("gray.700","gray.200"),children:"Colonia"}),e.jsx(Q,{defaultValue:h.colony,...t("colony"),children:i&&i.neighborhoods.map(r=>e.jsx("option",{value:r,children:r},r))}),s.colony&&e.jsx(n,{children:s.colony.message})]})]})]})}),e.jsx(J,{children:e.jsx(b,{type:"submit",colorScheme:"blue",isLoading:B,children:"Agregar dirección"})})]})]})})})]})};export{ue as default};
