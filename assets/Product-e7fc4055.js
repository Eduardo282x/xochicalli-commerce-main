import{r as n,a2 as W,a3 as O,a4 as V,a5 as P,a6 as H,a7 as z,a8 as $,j as e,a9 as p,B as d,V as R,T as w,aa as L,ab as y,_ as M,ac as J,v as U,ad as G,a as Q,U as K,W as X,A as Y,ae as Z,x as S,S as C,y as I,af as F}from"./index-d0bb2854.js";import{u as ee,F as E,o as se}from"./yup-b18650ce.js";import{S as u,a as ae}from"./chunk-QTKSMHLN-b3bed25b.js";import{A as ie}from"./chunk-WPAIWTI3-a4077d1e.js";import{B as te,a as f,b as v}from"./chunk-RDQRB6BQ-1e8cf47f.js";import{C as re}from"./chunk-3V5HNFOM-3d294e74.js";import{A as ne,a as le,b as oe,c as ce,d as de}from"./chunk-3VH7AMBV-0c40d351.js";import{F as N}from"./chunk-IJBC3YLI-6ce3e25a.js";import{F as A}from"./chunk-RN6VKE3K-a344299b.js";import{I as k}from"./chunk-GYFRIY2Z-bed9457d.js";import{T as me}from"./chunk-OEQDSMWZ-a5ca4fb9.js";const he=s=>{const[l,i]=n.useState(!1),[b,m]=n.useState([]);return n.useEffect(()=>{(async()=>{i(!0);try{const a=W(O,"comments");if(s){const h=V(a,P("product","==",s),P("checked","==",!0),H(3));z(h,r=>{m(r.docs.map(x=>({...x.data(),id:x.id})))})}else return[]}catch(a){return a}i(!1)})()},[l,s]),{loading:l,comments:b}},xe=s=>{const[l,i]=n.useState(!0),[b,m]=n.useState(),t=(h,r)=>h.find(g=>g.id===r),a=async()=>{var x;const h=localStorage.getItem("products"),r=h?JSON.parse(h):[{}];i(!0);try{const g=await $("products",s);if(((x=Object.keys(g))==null?void 0:x.length)===0){const o=t(r,s);m(o),i(!1)}else{const o=t(r,s);m(o),i(!1)}}catch{const o=t(r,s);m(o),i(!1)}};return n.useEffect(()=>{a()},[s]),{loading:l,product:b}},D=()=>e.jsxs(p,{direction:["column","column","row"],gap:[4,4,8,16],width:[350,"md","2xl","4xl","6xl"],height:"100%",children:[e.jsx(d,{width:[350,"full",350,560],height:500,bgColor:"white",borderRadius:"lg",objectFit:"cover",boxShadow:"base",children:e.jsx(u,{width:[350,"full",350,500],height:500,borderRadius:"lg"})}),e.jsxs(R,{height:"100%",width:"100%",justifyContent:"space-between",boxShadow:"base",py:2,px:6,borderRadius:"lg",children:[e.jsxs(d,{width:"full",my:4,children:[e.jsx(u,{width:"full",height:16}),e.jsx(u,{width:75,height:8,my:4}),e.jsx(ae,{width:"full",height:8,my:4,noOfLines:5}),e.jsx(u,{mt:4})]}),e.jsxs(p,{direction:["row","row","column"],py:4,alignItems:["center","center","flex-start"],justifyContent:"space-around",width:"full",children:[e.jsx(d,{border:"1px solid",borderColor:"gray.200",py:2,px:4,borderRadius:"lg",children:e.jsx(u,{width:100,height:50})}),e.jsx(u,{width:200,height:50})]})]})]}),je=s=>e.jsxs(d,{p:4,borderRadius:"md",bgColor:"gray.100",minWidth:["full",350],maxWidth:["full",350],children:[e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(ie,{src:s.avatar,name:s==null?void 0:s.name}),e.jsxs(w,{fontWeight:600,children:[s==null?void 0:s.name," ",s==null?void 0:s.fatherSurname]})]}),e.jsx(w,{noOfLines:3,my:2,children:s==null?void 0:s.comment}),e.jsxs(w,{fontWeight:600,children:["Fecha: ",new Date().toLocaleDateString()]})]}),ge=L().shape({name:y().required("El nombre es requerido").min(4,"El nombre debe tener mínimo 4 caracteres"),fatherSurname:y().required("El apellido paterno es requerido").min(4,"El apellido debe tener mínimo 4 caracteres"),comment:y().required("El comentario es requerido").min(6,"El comentario debe tener mínimo 6 caracteres")}),ue=L().shape({comment:y().required("El comentario es requerido").min(6,"El comentario debe tener mínimo 6 caracteres")});const pe=({products:s})=>(n.useEffect(()=>{console.log(s)},[s]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-around items-start w-full flex-col lg:flex-row",children:[e.jsxs("div",{className:"details",children:[s.Especie&&e.jsxs("p",{children:[e.jsx("span",{className:"imgPlant"}),"Especie: ",s.Especie]}),s.Variedad&&e.jsxs("p",{children:[e.jsx("span",{className:"imgLeaves"})," Variedad: ",s.Variedad]}),s.Aroma&&e.jsxs("p",{children:[e.jsx("span",{className:"imgNose"})," Aroma: ",s.Aroma]}),s.Disponibilidad&&e.jsxs("p",{children:[e.jsx("span",{className:"imgDone"})," Disponibilidad: ",s.Disponibilidad]}),s.Floración&&e.jsxs("p",{children:[e.jsx("span",{className:"imgFlower"}),"Floración: ",s.Floración]})]}),e.jsxs("div",{className:"details",children:[s.Edad&&e.jsxs("p",{children:[e.jsx("span",{className:"imgHeart"})," Tiempo de vida: ",s.Edad]}),s.Estado&&e.jsxs("p",{children:[e.jsx("span",{className:"imgHealt"})," Estado: ",s.Estado]}),s.Altura&&e.jsxs("p",{children:[e.jsx("span",{className:"imgHeight"})," Altura: ",s.Altura," ",s["unidad-Altura"]]}),s.Presentación&&e.jsxs("p",{children:[e.jsx("span",{className:"imgGift"})," Presentación: ",s.Presentación]})]})]}),e.jsxs("div",{className:"flex items-center justify-around w-full lg:flex-row flex-col",children:[e.jsxs("div",{className:"lg:w-1/2 w-full ",children:[e.jsx("div",{className:"title",children:e.jsx("p",{children:"Instrucciones"})}),e.jsx("div",{className:"chips-content w-full  lg:border-r-2 lg:border-[#ddd] lg:border-solid",children:s.instrucciones&&s.instrucciones.map((l,i)=>e.jsx("p",{className:i!==2?"chips":"chips-center",children:l},i))})]}),e.jsxs("div",{className:"lg:w-1/2 w-full",children:[e.jsx("div",{className:"title",children:e.jsx("p",{children:"Recomendacions"})}),e.jsx("div",{className:"chips-content",children:s.Recomendaciones&&s.Recomendaciones.map((l,i)=>e.jsx("p",{className:i!==2?"chips":"chips-center",children:l},i))})]})]})]})),be=n.lazy(()=>M(()=>import("./ProductView-a08aaf6e.js"),["assets/ProductView-a08aaf6e.js","assets/index-d0bb2854.js","assets/index-cd61ac83.css","assets/usePrice-1387bd08.js","assets/chunk-IXKZFKRY-440324a8.js","assets/yup-b18650ce.js","assets/chunk-IJBC3YLI-6ce3e25a.js","assets/chunk-QTKSMHLN-b3bed25b.js","assets/chunk-KSQA4OTT-47b5c419.js","assets/chunk-WPAIWTI3-a4077d1e.js","assets/chunk-RDQRB6BQ-1e8cf47f.js","assets/chunk-3V5HNFOM-3d294e74.js","assets/chunk-3VH7AMBV-0c40d351.js","assets/chunk-LB6CWFOC-afb3a818.js","assets/index-921dcd7d.js","assets/chunk-RN6VKE3K-a344299b.js","assets/chunk-GYFRIY2Z-bed9457d.js","assets/chunk-OEQDSMWZ-a5ca4fb9.js"])),fe=()=>{const s=J(),[l]=U("(min-width: 800px)"),{id:i}=G(),b=Q(),{user:m,userInformation:t}=n.useContext(K),{product:a,loading:h}=xe(i),{comments:r,loading:x}=he(a==null?void 0:a.title);n.useEffect(()=>{console.log("%croduct:::>","color:purple",a)},[a]);const{handleSubmit:g,register:o,formState:{errors:c,isSubmitting:_},reset:T}=ee({resolver:se(m?ue:ge)}),B=async j=>{j.name=t==null?void 0:t.name,j.fatherSurname=t==null?void 0:t.fatherSurname;try{s({status:"success",duration:1500,isClosable:!1,title:"Añadir comentario",position:l?"top-right":"bottom",description:"Se ha añadido tu comentario"}),T(),m?await F(j,a==null?void 0:a.title):await F(j,a==null?void 0:a.title)}catch(q){s({status:"error",duration:1500,isClosable:!1,title:"Añadir comentario",position:l?"bottom":"top-right",description:q})}};return n.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsxs(d,{minH:"calc(100vh - 72px)",bgColor:"gray.100",p:4,children:[e.jsx(X,{children:e.jsx("title",{children:`Producto: ${(a==null?void 0:a.title)===void 0?"Cargando...":a.title}`})}),e.jsxs(te,{pt:2,pb:6,ml:[0,0,16,24],children:[l&&e.jsx(f,{children:e.jsx(Y,{"aria-label":"back",icon:e.jsx(Z,{}),onClick:()=>b(-1)})}),e.jsx(f,{children:e.jsx(v,{as:S,to:"/",children:"Inicio"})}),e.jsx(f,{children:e.jsx(v,{as:S,to:"/products",children:"Productos"})}),e.jsx(f,{children:e.jsx(v,{as:S,to:`/products/${i}`,children:(a==null?void 0:a.title)??"product"})})]}),e.jsx(re,{children:e.jsx(d,{bgColor:"white",p:4,borderRadius:"lg",children:h?e.jsx(D,{}):e.jsxs(p,{direction:"column",gap:16,width:[350,"md","2xl","4xl","7xl"],minHeight:"xl",as:"main",children:[e.jsx(n.Suspense,{fallback:e.jsx(D,{}),children:e.jsx(be,{productt:a,id:i,category:a==null?void 0:a.category,description:a==null?void 0:a.description,image:a==null?void 0:a.image,price:a==null?void 0:a.price,title:a==null?void 0:a.title,subCategory:a==null?void 0:a.subCategory,tags:a==null?void 0:a.tags,stock:a==null?void 0:a.stock})}),e.jsx(ne,{marginTop:"10px",allowToggle:!0,children:e.jsxs(le,{sx:{borderBottom:"none"},children:[e.jsx("h2",{children:e.jsxs(oe,{children:[e.jsx(d,{fontWeight:700,as:"span",flex:"1",textAlign:"center",children:"Caracteristicas adicionales"}),e.jsx(ce,{})]})}),e.jsx(de,{sx:{border:"1px",borderColor:"#ddd",padding:"0",borderRadius:".5rem"},children:a&&e.jsx(pe,{products:a})})]})}),e.jsxs(d,{bgColor:"white",p:6,borderRadius:"lg",boxShadow:"base",children:[e.jsx(C,{fontSize:[20,24,32],mb:4,children:"Comentarios sobre el producto"}),e.jsx(p,{as:"article",direction:"row",gap:4,width:"full",justifyContent:"center",py:4,flexWrap:"wrap",children:x?e.jsx(C,{children:"Cargando..."}):r&&(r==null?void 0:r.length)===0?e.jsx(w,{fontWeight:500,fontSize:"xl",textAlign:"center",py:8,children:"Aún no hay comentarios sobre este producto"}):r.map(j=>n.createElement(je,{...j,key:j.id}))}),e.jsxs(d,{bgColor:"white",children:[e.jsx(C,{fontSize:[20,24,32],my:2,children:"Deja un comentario"}),e.jsx("form",{onSubmit:g(B),children:e.jsxs(R,{gap:4,p:[0,0,8],as:"article",alignItems:"flex-start",justifyContent:"space-between",width:"75%",mx:"auto",children:[e.jsx(p,{direction:["column","column","row"],width:"full",justifyContent:"space-between",gap:4,children:t==null&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{isInvalid:!!c.name,children:[e.jsx(A,{htmlFor:"Nombre",children:"Nombre(s)"}),e.jsx(k,{placeholder:"Nombre",id:"name",type:"text",maxLength:35,...o("name")}),c.name&&e.jsx(E,{children:c.name.message})]}),e.jsxs(N,{isInvalid:!!c.fatherSurname,children:[e.jsx(A,{htmlFor:"Apellido",children:"Apellido(s)"}),e.jsx(k,{placeholder:"Apellido",id:"fatherSurname",type:"text",max:50,...o("fatherSurname")}),c.fatherSurname&&e.jsx(E,{children:c.fatherSurname.message})]})]})}),e.jsxs(N,{isInvalid:!!c.comment,children:[e.jsx(A,{htmlFor:"Comentario",children:"Comentario"}),e.jsx(me,{placeholder:"Me parece bastante...",id:"comment",...o("comment")}),c.comment&&e.jsx(E,{children:c.comment.message})]}),e.jsx(I,{type:"submit",colorScheme:"green",isLoading:_,children:"Enviar comentario"})]})})]})]})]})})})]})},De=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"}));export{De as P,xe as u};
