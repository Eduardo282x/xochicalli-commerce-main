import{f as j,j as e,c as k,d as b,r as i,an as w,a2 as p,V as x,S,F as T,T as u,y,ah as C,aE as v,a3 as m}from"./index-5960d643.js";import{T as D,a as B,b as f,c as n,d as I,e as h}from"./chunk-Z3IFIKNA-a7e9294e.js";var _=j((s,t)=>{var r;const{overflow:c,overflowX:o,className:l,...a}=s;return e.jsx(k.div,{ref:t,className:b("chakra-table__container",l),...a,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:(r=c??o)!=null?r:"auto",overflowY:"hidden",maxWidth:"100%"}})});const E=()=>{const[s,t]=i.useState(!1),[r,c]=i.useState([]),o=async()=>{const a=localStorage.getItem("lastClicked"),d=a?new Date(JSON.parse(a)):null;(!d||new Date().getTime()-d.getTime()>864e5)&&(t(!0),localStorage.setItem("lastClicked",JSON.stringify(new Date)),await C(p(m,"backups"),{backupId:v(),createdBy:"admin",createdAt:new Date().toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})}),setTimeout(()=>{t(!1)},864e5))},l=i.useCallback(async()=>{const{docs:a}=await w(p(m,"backups")),d=a.map(g=>g.data());c(d)},[]);return i.useEffect(()=>{l()},[s,l]),e.jsxs(x,{minH:"calc(100vh - 64px)",bgColor:"gray.100",p:4,children:[e.jsx(S,{children:"Backups"}),e.jsxs(T,{flexDirection:["column","column","column","column","row"],gap:8,pt:6,children:[e.jsxs(x,{bgColor:"white",p:4,rounded:"lg",h:"100%",w:["xs","sm"],mx:"auto",children:[e.jsx(u,{fontWeight:600,fontSize:"xl",children:"Respaldar base de datos Firestore"}),e.jsx(u,{py:4,children:"Vas a poder realizar los respaldos de la base de datos de Firestore de manera diaria."}),e.jsx(y,{isDisabled:!s,onClick:o,children:"Respaldar"})]}),e.jsx(_,{bgColor:"white",rounded:"lg",p:4,width:["xs","sm","md","lg","2xl"],height:"100%",children:e.jsxs(D,{variant:"striped",children:[e.jsx(B,{children:e.jsxs(f,{children:[e.jsx(n,{children:"Fecha"}),e.jsx(n,{children:"ID de respaldo"}),e.jsx(n,{isNumeric:!0,children:"Hecho por"})]})}),e.jsx(I,{children:r.map(a=>e.jsxs(f,{children:[e.jsx(h,{children:a.createdAt}),e.jsx(h,{children:a.backupId}),e.jsx(h,{children:a.createdBy})]},a.backupId))})]})})]})]})};export{E as default};
