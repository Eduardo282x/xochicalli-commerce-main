import{c as ne,h as Se,r as x,ay as Ie,i as Y,m as De,b as _e,o as Ae,ao as Te,j as e,f as Ee,d as Fe,az as Me,ap as we,P as Oe,R as Re,w as le,y as M,I as Ve,aA as Ne,a0 as se,B as E,aB as Be,ac as ae,aC as Ue,T as Z,H as Le,A as Ge,aD as qe,aE as ue,aF as He,aG as Ke,aH as $e,a as ze,V as Xe,W as We,S as Ye,aI as Ze}from"./index-5960d643.js";import{D as pe,E as Je}from"./chunk-HFJCK6H7-90af3c75.js";import{A as ee}from"./chunk-VJ54TX72-a5f2f158.js";import{S as oe,e as re,C as de}from"./notistack.esm-5a1f56f4.js";import{M as me,a as ge,b as he,c as fe,d as ye,e as xe}from"./chunk-PVJ72NKC-7f81f1a2.js";import{M as Ce}from"./chunk-YLPWWAYV-004e51a3.js";import{F as G}from"./chunk-IJBC3YLI-1dc0c5c2.js";import{F as U}from"./chunk-RN6VKE3K-17968694.js";import{I as q}from"./chunk-GYFRIY2Z-7c2e976d.js";import{S as X}from"./chunk-GJO77I2I-62895ca8.js";import{I as Qe}from"./chunk-6XCF7NSR-20312537.js";import{I as et,a as tt}from"./chunk-ARKOWLPR-555db45c.js";import{T as nt}from"./chunk-OEQDSMWZ-85a6ecdb.js";import{A as at}from"./chunk-UESP75NN-050ec7e7.js";import{c as ot,u as rt}from"./index-dfdb2e15.js";import"./chunk-33PGJX5B-82e5cf51.js";import"./chunk-LB6CWFOC-afb3a818.js";import"./index-eaa72e81.js";var be={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},st=ne("span",{baseStyle:be});st.displayName="VisuallyHidden";var ve=ne("input",{baseStyle:be});ve.displayName="VisuallyHiddenInput";var[it,Xt,ct,lt]=ot(),[ut,pt]=Se({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to all pin input fields within `<PinInput />`"}),ie=s=>s==null?void 0:s.split("");function ce(s,i){return(i==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(s)}function dt(s={}){const{autoFocus:i,value:c,defaultValue:d,onChange:y,onComplete:g,placeholder:j="○",manageFocus:C=!0,otp:p=!1,id:b,isDisabled:D,isInvalid:w,type:_="number",mask:O}=s,v=x.useId(),S=b??`pin-input-${v}`,f=ct(),[l,P]=x.useState(!0),[I,A]=x.useState(-1),[T,r]=rt({defaultValue:ie(d)||[],value:ie(c),onChange:m=>y==null?void 0:y(m.join(""))});x.useEffect(()=>{if(i){const m=f.first();m&&requestAnimationFrame(()=>{m.node.focus()})}},[f]);const o=x.useCallback(m=>{if(!l||!C)return;const h=f.next(m,!1);h&&requestAnimationFrame(()=>{h.node.focus()})},[f,l,C]),n=x.useCallback((m,h,k=!0)=>{const R=[...T];R[h]=m,r(R),m!==""&&R.length===f.count()&&R.every(B=>B!=null&&B!=="")?g==null||g(R.join("")):k&&o(h)},[T,r,o,g,f]),t=x.useCallback(()=>{var m;const h=Array(f.count()).fill("");r(h);const k=f.first();(m=k==null?void 0:k.node)==null||m.focus()},[f,r]),a=x.useCallback((m,h)=>{let k=h;return(m==null?void 0:m.length)>0&&(m[0]===h.charAt(0)?k=h.charAt(1):m[0]===h.charAt(1)&&(k=h.charAt(0))),k},[]);return{getInputProps:x.useCallback(m=>{const{index:h,...k}=m,R=L=>{const F=L.target.value,V=T[h],J=a(V,F);if(J===""){n("",h);return}if(F.length>2){if(ce(F,_)){const Q=F.split("").filter((At,ke)=>ke<f.count());r(Q),Q.length===f.count()&&(g==null||g(Q.join("")))}}else ce(J,_)&&n(J,h),P(!0)},N=L=>{var F;if(L.key==="Backspace"&&C)if(L.target.value===""){const V=f.prev(h,!1);V&&(n("",h-1,!1),(F=V.node)==null||F.focus(),P(!0))}else P(!1)},B=()=>{A(h)},H=()=>{A(-1)},K=I===h;return{"aria-label":"Please enter your pin code",inputMode:_==="number"?"numeric":"text",type:O?"password":_==="number"?"tel":"text",...k,id:`${S}-${h}`,disabled:D,"aria-invalid":Ie(w),onChange:Y(k.onChange,R),onKeyDown:Y(k.onKeyDown,N),onFocus:Y(k.onFocus,B),onBlur:Y(k.onBlur,H),value:T[h]||"",autoComplete:p?"one-time-code":"off",placeholder:K?"":j}},[f,I,a,S,D,O,w,C,g,p,j,n,r,_,T]),id:S,descendants:f,values:T,setValue:n,setValues:r,clear:t}}function mt(s={},i=null){const{getInputProps:c}=pt(),{index:d,register:y}=lt();return c({...s,ref:De(y,i),index:d})}function je(s){const i=_e("PinInput",s),{children:c,...d}=Ae(s),{descendants:y,...g}=dt(d),j=Te(c).map(C=>x.cloneElement(C,{__css:i}));return e.jsx(it,{value:y,children:e.jsx(ut,{value:g,children:j})})}je.displayName="PinInput";var z=Ee(function(i,c){const d=mt(i,c);return e.jsx(ne.input,{...d,className:Fe("chakra-pin-input",i.className)})});z.displayName="PinInputField";const gt=()=>{const[s,i]=x.useState({});return x.useEffect(()=>{(async()=>{const d=await Me();i(d)})()},[]),{dataCategorias:s}};var te={exports:{}};(function(s,i){(function(c,d){d(i,x,we)})(Oe,function(c,d,y){Object.defineProperty(c,"__esModule",{value:!0});var g=j(d);j(y);function j(r){return r&&r.__esModule?r:{default:r}}function C(r,o,n){return o in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,r}function p(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}var b=function(){function r(o,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}return function(o,n,t){return n&&r(o.prototype,n),t&&r(o,t),o}}();function D(r,o){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:r}function w(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(r,o):r.__proto__=o)}var _=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r};function O(r,o){var n={};for(var t in r)o.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t]);return n}function v(r){for(var o=[],n=0;n<r.length;n++)o.indexOf(r[n])===-1&&o.push(typeof r[n]=="string"?r[n].trim():r[n]);return o}function S(r){return window.clipboardData?window.clipboardData.getData("Text"):r.clipboardData?r.clipboardData.getData("text/plain"):""}function f(r){var o=r.tag,n=r.key,t=r.disabled,a=r.onRemove,u=r.classNameRemove,m=r.getTagDisplayValue,h=O(r,["tag","key","disabled","onRemove","classNameRemove","getTagDisplayValue"]);return g.default.createElement("span",_({key:n},h),m(o),!t&&g.default.createElement("a",{className:u,onClick:function(R){return a(n)}}))}function l(r){r.addTag;var o=O(r,["addTag"]),n=o.onChange,t=o.value,a=O(o,["onChange","value"]);return g.default.createElement("input",_({type:"text",onChange:n,value:t},a))}function P(r,o){return g.default.createElement("span",null,r,o)}function I(r){return r.split(" ").map(function(o){return o.trim()})}var A={className:"react-tagsinput-input",placeholder:"Add a tag"},T=function(r){w(o,r);function o(){p(this,o);var n=D(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return n.state={tag:"",isFocused:!1},n.focus=n.focus.bind(n),n.blur=n.blur.bind(n),n.accept=n.accept.bind(n),n}return b(o,[{key:"_getTagDisplayValue",value:function(t){var a=this.props.tagDisplayProp;return a?t[a]:t}},{key:"_makeTag",value:function(t){var a=this.props.tagDisplayProp;return a?C({},a,t):t}},{key:"_removeTag",value:function(t){var a=this.props.value.concat([]);if(t>-1&&t<a.length){var u=a.splice(t,1);this.props.onChange(a,u,[t])}}},{key:"_clearInput",value:function(){this.hasControlledInput()?this.props.onChangeInput(""):this.setState({tag:""})}},{key:"_tag",value:function(){return this.hasControlledInput()?this.props.inputValue:this.state.tag}},{key:"_addTags",value:function(t){var a=this,u=this.props,m=u.onChange,h=u.onValidationReject,k=u.onlyUnique,R=u.maxTags,N=u.value;k&&(t=v(t),t=t.filter(function(F){return N.every(function(V){return a._getTagDisplayValue(V)!==a._getTagDisplayValue(F)})}));var B=t.filter(function(F){return!a._validate(a._getTagDisplayValue(F))});if(t=t.filter(function(F){return a._validate(a._getTagDisplayValue(F))}),t=t.filter(function(F){var V=a._getTagDisplayValue(F);return typeof V.trim=="function"?V.trim().length>=0:V}),R>=0){var H=Math.max(R-N.length,0);t=t.slice(0,H)}if(h&&B.length>0&&h(B),t.length>0){for(var K=N.concat(t),$=[],L=0;L<t.length;L++)$.push(N.length+L);return m(K,t,$),this._clearInput(),!0}return B.length>0||this._clearInput(),!1}},{key:"_validate",value:function(t){var a=this.props,u=a.validate,m=a.validationRegex;return u(t)&&m.test(t)}},{key:"_shouldPreventDefaultEventOnAdd",value:function(t,a,u){return t?!0:u==="Enter"?this.props.preventSubmit||!this.props.preventSubmit&&!a:!1}},{key:"focus",value:function(){this.input&&typeof this.input.focus=="function"&&this.input.focus(),this.handleOnFocus()}},{key:"blur",value:function(){this.input&&typeof this.input.blur=="function"&&this.input.blur(),this.handleOnBlur()}},{key:"accept",value:function(){var t=this.props.preventSubmit,a=this._tag();return a!==""||!t?(a=this._makeTag(a),this._addTags([a])):!1}},{key:"addTag",value:function(t){return this._addTags([t])}},{key:"clearInput",value:function(){this._clearInput()}},{key:"handlePaste",value:function(t){var a=this,u=this.props,m=u.addOnPaste,h=u.pasteSplit;if(m){t.preventDefault();var k=S(t),R=h(k).map(function(N){return a._makeTag(N)});this._addTags(R)}}},{key:"handleKeyDown",value:function(t){if(!t.defaultPrevented){var a=this.props,u=a.value,m=a.removeKeys,h=a.addKeys,k=this._tag(),R=k==="",N=t.keyCode,B=t.key,H=h.indexOf(N)!==-1||h.indexOf(B)!==-1,K=m.indexOf(N)!==-1||m.indexOf(B)!==-1;if(H){var $=this.accept();this._shouldPreventDefaultEventOnAdd($,R,B)&&t.preventDefault()}K&&u.length>0&&R&&(t.preventDefault(),this._removeTag(u.length-1))}}},{key:"handleClick",value:function(t){var a=t.target,u=t.target&&t.target.parentElement;(a===this.div||u===this.div)&&this.focus()}},{key:"handleChange",value:function(t){var a=this.props.onChangeInput,u=this.props.inputProps.onChange,m=t.target.value;u&&u(t),this.hasControlledInput()?a(m):this.setState({tag:m})}},{key:"handleOnFocus",value:function(t){var a=this.props.inputProps.onFocus;a&&a(t),this.setState({isFocused:!0})}},{key:"handleOnBlur",value:function(t){var a=this.props.inputProps.onBlur;if(this.setState({isFocused:!1}),t!=null&&(a&&a(t),this.props.addOnBlur&&t.target.value)){var u=this._makeTag(t.target.value);this._addTags([u])}}},{key:"handleRemove",value:function(t){this._removeTag(t)}},{key:"inputProps",value:function(){var t=this.props.inputProps;t.onChange,t.onFocus,t.onBlur;var a=O(t,["onChange","onFocus","onBlur"]),u=_({},A,a);return this.props.disabled&&(u.disabled=!0),u}},{key:"inputValue",value:function(t){return t.currentValue||t.inputValue||""}},{key:"hasControlledInput",value:function(){var t=this.props,a=t.inputValue,u=t.onChangeInput;return typeof u=="function"&&typeof a=="string"}},{key:"componentDidMount",value:function(){this.hasControlledInput()||this.setState({tag:this.inputValue(this.props)})}},{key:"componentDidUpdate",value:function(t){this.hasControlledInput()||this.inputValue(this.props)&&this.inputValue(t)!==this.inputValue(this.props)&&this.setState({tag:this.inputValue(this.props)})}},{key:"render",value:function(){var t=this,a=this.props,u=a.value,m=a.tagProps,h=a.renderLayout,k=a.renderTag,R=a.renderInput,N=a.className,B=a.focusedClassName,H=a.disabled,K=this.state.isFocused,$=u.map(function(F,V){return k(_({key:V,tag:F,onRemove:t.handleRemove.bind(t),disabled:H,getTagDisplayValue:t._getTagDisplayValue.bind(t)},m))}),L=R(_({ref:function(V){t.input=V},value:this._tag(),onPaste:this.handlePaste.bind(this),onKeyDown:this.handleKeyDown.bind(this),onChange:this.handleChange.bind(this),onFocus:this.handleOnFocus.bind(this),onBlur:this.handleOnBlur.bind(this),addTag:this.addTag.bind(this)},this.inputProps()));return g.default.createElement("div",{ref:function(V){t.div=V},onClick:this.handleClick.bind(this),className:N+(K?" "+B:"")},h($,L))}}]),o}(g.default.Component);T.defaultProps={className:"react-tagsinput",focusedClassName:"react-tagsinput--focused",addKeys:["Tab","Enter"],addOnBlur:!1,addOnPaste:!1,inputProps:{},removeKeys:["Backspace"],renderInput:l,renderTag:f,renderLayout:P,pasteSplit:I,tagProps:{className:"react-tagsinput-tag",classNameRemove:"react-tagsinput-remove"},onlyUnique:!1,maxTags:-1,validate:function(){return!0},validationRegex:/.*/,disabled:!1,tagDisplayProp:null,preventSubmit:!0},c.default=T,s.exports=c.default})})(te,te.exports);var ht=te.exports;const Pe=Re(ht);const ft=({category:s})=>{const[i,c]=x.useState(!1),{isOpen:d,onOpen:y,onClose:g}=le();return e.jsxs(e.Fragment,{children:[e.jsx(oe,{}),e.jsx(M,{marginLeft:"10px",onClick:y,children:e.jsx(pe,{})}),e.jsxs(me,{isOpen:d,onClose:g,children:[e.jsx(ge,{}),e.jsxs(he,{children:[e.jsxs(fe,{children:["ELIMINAR CATEGORIA",e.jsx(Ve,{style:{width:"60%",margin:"0 auto"},src:"/Charco - Delete Trash.png",alt:"Dan Abramov"})]}),e.jsx(Ce,{}),e.jsxs(ye,{children:["La categoria ",e.jsxs("span",{style:{fontWeight:700},children:['"',s,'"']}),"se eliminara permanentemente"]}),e.jsxs(xe,{children:[e.jsx(M,{colorScheme:"blue",mr:3,onClick:g,children:"Cerrar"}),e.jsx(M,{onClick:async()=>{c(!0);const j=await Ne(s);c(!1),re(j?"Categoria eliminada con exito":"Error al eiminar categoria",{variant:j?"success":"error",preventDuplicate:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"}}),g()},colorScheme:"red",children:i?e.jsx(de,{size:"25px",isIndeterminate:!0,color:"#ffffff"}):"Eliminar"})]})]})]})]})},yt=({propCategory:s})=>{const[i,c]=x.useState(!1),[d,y]=x.useState(!1),{isOpen:g,onOpen:j,onClose:C}=le(),[p,b]=x.useState({categoria:"",finalCategory:!1,numSubcategorys:0,subCategorys:{}}),D=se.useRef(null),w=se.useRef(null),_=(l,P)=>{var A,T,r,o,n;const I=((T=(A=p==null?void 0:p.subCategorys[l])==null?void 0:A.subCategorys)==null?void 0:T.numItems)>0;return e.jsxs(E,{children:[e.jsxs(U,{children:["Subcategoria-",P+1]}),e.jsxs(E,{display:"flex",children:[e.jsx(q,{value:((r=p==null?void 0:p.subCategorys[l])==null?void 0:r.nameCategory)??"",onChange:t=>{b(a=>{const u={...a};return u.subCategorys[l].nameCategory=t.target.value,u})},ref:D,placeholder:"Abono"}),e.jsx(M,{display:I?"none":"block",onClick:()=>v(l),name:"addSubcateogry",children:e.jsx(ee,{})}),e.jsx(M,{children:e.jsx(pe,{onClick:()=>S(l)})})]}),I?e.jsx(Pe,{value:(n=(o=p==null?void 0:p.subCategorys[l])==null?void 0:o.subCategorys[0])==null?void 0:n.value,onChange:t=>{b(a=>{const u={...p};return a.subCategorys[l].subCategorys[0].value=t,u})}}):null]})},O=()=>{const l=p.numSubcategorys,P="subcateogory"+l;b({...p,numSubcategorys:l+1,subCategorys:{...p.subCategorys,[P]:{nameCategory:"",subCategorys:{numItems:0}}}})},v=l=>{const P=p.subCategorys[l].subCategorys.numItems;b(I=>{const A={...I};return A.subCategorys.hasOwnProperty(l)&&(A.subCategorys[l].subCategorys.numItems=P+1,A.subCategorys[l].subCategorys[P]={name:"",value:[],finalCategory:!1}),A})},S=l=>{b(P=>{const I={...P};return I.subCategorys.hasOwnProperty(l)&&delete I.subCategorys[l],I})},f=async()=>{c(!0);const l=await Be(p);b({categoria:"",finalCategory:!1,numSubcategorys:0,subCategorys:{}}),re(l?"Categoria agregada con exito":"Error al agregar categoria",{variant:l?"success":"error",preventDuplicate:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"}}),c(!1),C()};return e.jsxs(e.Fragment,{children:[e.jsx(oe,{}),e.jsx(M,{onClick:()=>{j(),b({categoria:"",finalCategory:!1,numSubcategorys:0,subCategorys:{}})},children:e.jsx(ee,{})}),e.jsx(M,{ml:4,onClick:()=>{y(!0),j(),b(s)},ref:w,children:e.jsx(Je,{})}),e.jsxs(me,{initialFocusRef:D,finalFocusRef:w,isOpen:g,onClose:C,children:[e.jsx(ge,{}),e.jsxs(he,{children:[e.jsx(fe,{children:"Create your account"}),e.jsx(Ce,{}),e.jsxs(ye,{pb:6,children:[e.jsxs(G,{children:[e.jsx(U,{children:"Categoria"}),e.jsxs(E,{display:"flex",children:[e.jsx(q,{value:p.categoria,onChange:l=>b({...p,categoria:l.target.value}),ref:D,placeholder:"Abono"}),e.jsx(M,{onClick:O,children:e.jsx(ee,{})}),d?e.jsx(ft,{category:p.categoria}):null]})]}),Object.keys(p.subCategorys).map((l,P)=>e.jsx(E,{children:_(l,P)},l))]}),e.jsxs(xe,{children:[e.jsx(M,{onClick:f,colorScheme:"blue",mr:3,children:i?e.jsx(de,{size:"25px",isIndeterminate:!0,color:"#ffffff"}):"Save"}),e.jsx(M,{onClick:C,children:"Cancel"})]})]})]})]})},xt=({setValue:s,values:i})=>{var _,O;const{dataCategorias:c}=gt(),[d,y]=x.useState([]),[g,j]=x.useState(""),[C,p]=x.useState(""),b=v=>{const S=v.target.name,f=v.target.value;switch(s(l=>({...l,[S]:f})),S){case"category":const l=c[f].subCategorys.subcateogory0.nameCategory,P=D(l,f);s(I=>({...I,tags:P[0],subCategory:l}));break;case"subCategory":D(f),j(f);break;case"tags":p(f);break}},D=(v,S=i.category)=>{var f,l,P,I,A,T,r,o;for(const n in(f=c[S])==null?void 0:f.subCategorys)if(((l=c[S])==null?void 0:l.subCategorys[n].nameCategory)===v){const t=((A=(I=(P=c[S])==null?void 0:P.subCategorys[n])==null?void 0:I.subCategorys[0])==null?void 0:A.value)??[];return y(((o=(r=(T=c[S])==null?void 0:T.subCategorys[n])==null?void 0:r.subCategorys[0])==null?void 0:o.value)??[]),t}},w=(v=null)=>{var l,P,I,A,T,r,o;const S=((I=(P=(l=c[Object.keys(c)[0]])==null?void 0:l.subCategorys)==null?void 0:P.subcateogory0)==null?void 0:I.nameCategory)??"",f=((o=(r=(T=(A=c[Object.keys(c)[0]])==null?void 0:A.subCategorys)==null?void 0:T.subcateogory0)==null?void 0:r.subCategorys[0])==null?void 0:o.value)??[];if(j(S),y(f),v===null)s(n=>({...n,subCategory:S,tags:f[0]}));else{const n=D(g);s(t=>({...t,subCategory:g,tags:n[0]}))}};return x.useEffect(()=>{var v;((v=i==null?void 0:i.subCategory)==null?void 0:v.length)===0&&w()},[c]),e.jsxs(e.Fragment,{children:[e.jsx(E,{sx:{textAlign:"-webkit-center"},children:e.jsx("div",{style:{textAlign:"center",width:"150px"},children:e.jsx("strong",{children:"Categoria"})})}),e.jsxs(G,{mb:4,children:[e.jsx(U,{htmlFor:"category",children:"Categoría"}),e.jsxs(E,{style:{display:"flex"},children:[e.jsx(X,{name:"category",onChange:b,value:i.category,children:(_=c==null?void 0:c.categorias)==null?void 0:_.map(v=>e.jsx("option",{value:v,children:v},crypto.randomUUID()))}),e.jsx(yt,{propCategory:c[i.category]})]}),e.jsx(U,{htmlFor:"subcategory",style:{marginTop:"7px"},children:"Sub-Categoría"}),e.jsx(X,{value:i.subCategory,onChange:b,name:"subCategory",children:Object.keys(((O=c[i.category])==null?void 0:O.subCategorys)??"").map(v=>{var f,l;const S=((l=(f=c[i.category])==null?void 0:f.subCategorys[v])==null?void 0:l.nameCategory)??"";return e.jsx("option",{value:S,children:S},S)})}),e.jsxs(E,{display:d.length>0?"block":"none",children:[e.jsx(U,{htmlFor:"tags",style:{marginTop:"7px"},children:"Etiquetas"}),e.jsx(X,{value:i.tags,onChange:b,name:"tags",children:d==null?void 0:d.map(v=>e.jsx("option",{value:v,children:v},v))})]})]})]})},Ct=({fn:s,name:i})=>e.jsx(M,{onClick:s,children:i}),bt=({setValue:s,setStep1:i,values:c})=>{const d=ae(),y=p=>{const b=p.target.name,D=p.target.value;s(w=>({...w,[b]:D}))},g=(p,b,D)=>{d({title:p,description:b,status:D,duration:3e3,isClosable:!0})},j=()=>{const p=C("title"),b=C("marca"),D=C("price"),w=C("description");if(!p||!b||!D||!w){g("Error","Por favor, completa todos los campos antes de continuar","error");return}i(!0)},C=p=>document.querySelector(`[name=${p}]`).value.trim();return e.jsxs(e.Fragment,{children:[e.jsx(E,{sx:{textAlign:"-webkit-center"},children:e.jsx("div",{style:{textAlign:"center",width:"150px"},children:e.jsx("strong",{children:"Caracteristicas Principales"})})}),e.jsxs(G,{mb:4,children:[e.jsx(U,{children:"Nombre de producto"}),e.jsx(q,{name:"title",type:"text",borderColor:"gray.200",placeholder:"Planta medicinal",onChange:y,value:c.title})]}),e.jsxs(G,{mb:4,children:[e.jsx(U,{htmlFor:"marca",children:"Marca"}),e.jsx(q,{type:"text",name:"marca",borderColor:"gray.200",placeholder:"Xochicalli",onChange:y,value:c.marca})]}),e.jsxs(G,{mb:4,children:[e.jsx(U,{htmlFor:"price",children:"Precio"}),e.jsxs(Qe,{children:[e.jsx(et,{children:"$"}),e.jsx(q,{name:"price",type:"number",borderColor:"gray.200",placeholder:"12345",onChange:y,value:c.price}),e.jsx(tt,{children:"MXN"})]})]}),e.jsxs(G,{mb:4,children:[e.jsx(U,{htmlFor:"description",children:"Descripción del producto"}),e.jsx(nt,{name:"description",borderColor:"gray.200",placeholder:"Planta con aroma agradable para curar enfermedades",onChange:y,value:c.description})]}),e.jsx(Ct,{name:"Siguiente",fn:j})]})};function vt(s){return Ue({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z"}}]})(s)}const jt={INSUMOS:{Fertilizantes:[{name:"Presentación",type:"text",component:"select",option:["Bolsa","Caja","Paquete"]},{name:"Contenido",type:"number",component:"duplex",option:["Kg","Gr","L","Ml"]},{name:"Material",type:"text",component:"input"},{name:"Graduacion",type:"number",component:"pin"},{name:"instrucciones",type:"text",component:"tags"},{name:"Recomendaciones",type:"text",component:"tags"}],Abonos:[{name:"Presentación",type:"text",component:"select",option:["Bolsa","Envase","Sobre"]},{name:"Contenido",type:"number",component:"duplex",option:["Kg","Gr","L","Ml"]},{name:"instrucciones",type:"text",component:"tags"},{name:"Recomendaciones",type:"text",component:"tags"}],Macetas:[{name:"Material",type:"text",component:"input"},{name:"Color",type:"text",component:"input"},{name:"Tamaño",type:"number",component:"select",option:["#1","#2","#3","#4","#5","#6"]},{name:"Altura",type:"number",component:"duplex",option:["M","Cm"]},{name:"Diametro",type:"number",component:"duplex",option:["M","Cm"]},{name:"Capacidad",type:"number",component:"duplex",option:["Kg","Gr","L","Ml"]}],Tratamientos:[{name:"Presentación",type:"text",component:"select",option:["Bolsa","Envase","Sobre"]},{name:"Contenido",type:"number",component:"duplex",option:["Kg","Gr","L","Ml"]},{name:"Material",type:"text",component:"input"},{name:"instrucciones",type:"text",component:"tags"},{name:"Recomendaciones",type:"text",component:"tags"},{name:"Precauciónes",type:"text",component:"tags"}],Herramientas:[{name:"Material",type:"text",component:"input"},{name:"Color",type:"text",component:"input"},{name:"Tamaño",type:"text",component:"select",option:["Grande","Mediano","Chico"]},{name:"Altura",type:"number",component:"duplex",option:["M","Cm"]},{name:"Ancho",type:"number",component:"duplex",option:["Cm","M"]},{name:"Codigo",type:"text",component:"input"}]},FLORES:{Rosas:[{name:"Especie",type:"text",component:"input"},{name:"Aroma",type:"text",component:"input"},{name:"Disponibilidad",type:"text",component:"select",option:["Por temporada","Por Pedido","Disponible todo el año"]},{name:"Floración",type:"text",component:"input"},{name:"Tiempo de vida",type:"text",component:"input"},{name:"Estado",type:"text",component:"input"},{name:"Altura",type:"number",component:"duplex",option:["M","Cm"]},{name:"Presentación",type:"text",component:"input"},{name:"instrucciones",type:"text",component:"tags"}],Petalos:[{name:"Especie",type:"text",component:"input"},{name:"Aroma",type:"text",component:"input"},{name:"Disponibilidad",type:"text",component:"select",option:["Por temporada","Aromática","Exóticas"]},{name:"Floración",type:"text",component:"input"},{name:"Tiempo de vida",type:"text",component:"input"},{name:"Estado",type:"text",component:"input"},{name:"Altura",type:"number",component:"duplex",option:["Cm","Mm"]},{name:"Presentación",type:"text",component:"input"},{name:"instrucciones",type:"text",component:"tags"}],Claveles:[{name:"Especie",type:"text",component:"input"},{name:"Aroma",type:"text",component:"input"},{name:"Disponibilidad",type:"text",component:"select",option:["Por temporada","Aromática","Exóticas"]},{name:"Floración",type:"text",component:"input"},{name:"Tiempo de vida",type:"text",component:"input"},{name:"Estado",type:"text",component:"input"},{name:"Altura",type:"number",component:"duplex",option:["Cm","Mm"]},{name:"Presentación",type:"text",component:"input"},{name:"instrucciones",type:"text",component:"tags"}]},PLANTAS:{Arbustos:[{name:"Especie",type:"text",component:"input"},{name:"Variedad",type:"text",component:"input"},{name:"Floración",type:"text",component:"input"},{name:"Edad",type:"number",component:"duplex",option:["Dias","Semanas","Meses","Años"]},{name:"Estado",type:"text",component:"input"},{name:"Altura",type:"number",component:"duplex",option:["M","Cm"]},{name:"Ancho",type:"number",component:"duplex",option:["M","Cm"]},{name:"Presentación",type:"text",component:"select",option:["Maceta #1","Maceta #2","Maceta #3","Maceta #4","Maceta #5"]},{name:"Recomendaciones",type:"text",component:"tags"},{name:"Precauciónes",type:"text",component:"tags"}],Arboles:[{name:"Especie",type:"text",component:"input"},{name:"Variedad",type:"text",component:"input"},{name:"Floración",type:"text",component:"input"},{name:"Edad",type:"number",component:"duplex",option:["Dias","Semanas","Meses","Años"]},{name:"Estado",type:"text",component:"input"},{name:"Altura",type:"number",component:"duplex",option:["M","Cm"]},{name:"Ancho",type:"number",component:"duplex",option:["M","Cm"]},{name:"Presentación",type:"text",component:"select",option:["Maceta #1","Maceta #2","Maceta #3","Maceta #4","Maceta #5"]},{name:"Recomendaciones",type:"text",component:"tags"},{name:"Precauciónes",type:"text",component:"tags"}],Orquídeas:[{name:"Especie",type:"text",component:"input"},{name:"Variedad",type:"text",component:"input"},{name:"Floración",type:"text",component:"input"},{name:"Edad",type:"number",component:"duplex",option:["Dias","Semanas","Meses","Años"]},{name:"Estado",type:"text",component:"input"},{name:"Altura",type:"number",component:"duplex",option:["M","Cm"]},{name:"Ancho",type:"number",component:"duplex",option:["M","Cm"]},{name:"Presentación",type:"text",component:"select",option:["Maceta #1","Maceta #2","Maceta #3","Maceta #4","Maceta #5"]},{name:"Recomendaciones",type:"text",component:"tags"},{name:"Precauciónes",type:"text",component:"tags"}]},SEMILLAS:{Semilla:[{name:"Especie",type:"text",component:"input"},{name:"Variedad",type:"text",component:"input"},{name:"Cantidad",type:"number",component:"input"},{name:"Presentación",type:"text",component:"select",option:["Bolsa","Envase","Sobre"]},{name:"Peso",type:"number",component:"duplex",option:["Kg","Gr"]}]}},W=s=>s.charAt(0).toUpperCase()+s.slice(1)+".",Pt=(s,i,c,d,y)=>{const[g,j]=x.useState(!1),C=`unidad-${s}`;return x.useEffect(()=>{g||(d({target:{name:C,value:i[0]}}),d({target:{name:s,value:""}}),j(!0))},[i,C,g,s]),e.jsxs(E,{children:[e.jsx(U,{htmlFor:"content",children:W(s)}),e.jsxs(E,{display:"flex",children:[e.jsx(q,{onChange:d,name:s,type:c,borderColor:"gray.200",placeholder:"350",width:"350px"}),e.jsx(X,{name:C,width:"150px",onChange:d,value:y[C],children:i==null?void 0:i.map(p=>e.jsx("option",{value:p,children:p},crypto.randomUUID()))})]})]})},kt=(s,i,c,d)=>{const[y,g]=x.useState(!1);return x.useEffect(()=>{y||(c({target:{name:s,value:i[0]}}),g(!0))},[i,y,s]),e.jsx(E,{children:e.jsxs(E,{mb:4,children:[e.jsx(U,{children:W(s)}),e.jsx(X,{name:s,onChange:c,value:d[s],children:i==null?void 0:i.map(j=>e.jsx("option",{value:j,children:j},crypto.randomUUID()))})]})})},St=(s,i,c)=>e.jsxs(E,{children:[e.jsx(U,{children:W(s)}),e.jsx(q,{name:s,onChange:c,type:i,borderColor:"gray.200"})]}),It=(s,i)=>e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:W(s)}),e.jsx(Le,{children:e.jsxs(je,{onChange:c=>{i(d=>({...d,Graduacion:c}))},children:[e.jsx(z,{}),e.jsx(z,{}),e.jsx(Z,{children:"--"}),e.jsx(z,{}),e.jsx(z,{}),e.jsx(Z,{children:"--"}),e.jsx(z,{}),e.jsx(z,{})]})})]}),Dt=(s,i,c,d)=>e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:W(s)}),e.jsx(Pe,{inputProps:{placeholder:"Agregar etiqueta"},value:c[s]??[],onChange:y=>{d(g=>({...g,[s]:y}))}})]}),_t=({values:s,setValue:i,setStep2:c})=>{const[d,y]=x.useState(!1),[g,j]=x.useState(!1),[C,p]=x.useState(""),b=x.useRef(null),D=ae(),w=jt,_=s==null?void 0:s.category,v=(o=>o==="Aromáticas"||o==="De temporada"||o==="Exóticas"?"ROSAS":o)(s==null?void 0:s.subCategory),S=[{name:"datos adicionales",type:"text",component:"input"}],f=w[_][v]===void 0?S:w[_][v],l=o=>{const n=o.target.name,t=o.target.value;i(a=>({...a,[n]:t}))},P=o=>{var n,t;if((t=(n=o.current)==null?void 0:n.files)!=null&&t.length){const a=o.current.files[0],u=new FileReader;u.onload=m=>{var k;const h=(k=m==null?void 0:m.target)==null?void 0:k.result;h&&p(h)},u.readAsDataURL(a)}else console.error("No file selected")},I=o=>{var n,t;if(y(!0),(t=(n=o.current)==null?void 0:n.files)!=null&&t.length){const a=o.current.files[0],u=a.name,m=qe(He,`products/${ue()+u}`);T(m,a),y(!1)}else D({title:"No se ha seleccionado ninguna imagen",duration:2e3,status:"error",position:"top-right"}),y(!1)},A=()=>{p(""),j(!1),i(o=>({...o,image:""}))},T=(o,n)=>{const t=Ke(o,n);t.on("state_changed",({state:a})=>{switch(a){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},a=>{console.error(a)},async()=>{const a=await $e(t.snapshot.ref);i(u=>({...u,image:a}))})},r=o=>{const{component:n,name:t,type:a,option:u}=o;switch(n){case"select":return kt(t,u,l,s);case"duplex":return Pt(t,u,a,l,s);case"input":return St(t,a,l);case"tags":return Dt(t,l,s,i);case"pin":return It(t,i)}};return x.useEffect(()=>{s.image.length>0&&re("todo fue un exito",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"right"}})},[s.image.length]),e.jsxs(e.Fragment,{children:[e.jsx(oe,{}),e.jsx(Ge,{"aria-label":"back",icon:e.jsx(at,{}),onClick:()=>{c(!1)},w:"max-content"}),e.jsx(E,{sx:{textAlign:"-webkit-center"},children:e.jsx("div",{style:{textAlign:"center",width:"150px"},children:e.jsx("strong",{children:"Caracteristicas Secundarias"})})}),e.jsxs(G,{mb:4,children:[e.jsx(U,{htmlFor:"stock",children:"Stock"}),e.jsx(q,{name:"stock",type:"number",borderColor:"gray.200",placeholder:"5",onChange:l})]}),f.map((o,n)=>e.jsx(E,{children:r(o)},n)),e.jsxs(G,{mb:4,children:[e.jsx(U,{htmlFor:"image",children:"Imagen"}),e.jsx(E,{style:{padding:"20%",textAlign:"center",border:"#00000040 dashed",display:g?"none":"block"},children:e.jsxs(M,{as:"label",background:"blue.100",rightIcon:e.jsx(vt,{}),children:["Upload IMG",e.jsx(ve,{accept:"image/*",ref:b,onChange:()=>{j(!0),P(b)},type:"file"})]})}),C&&e.jsxs(E,{id:"contianer_img",sx:{justifyContent:"center",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("img",{style:{width:"90%"},src:C,alt:"Preview"}),e.jsxs(E,{sx:{width:"90%",justifyContent:"space-evenly",marginY:"10px"},display:s.image.length>0?"none":"flex",children:[e.jsx(M,{isLoading:d,loadingText:"Cargando img",colorScheme:"blue",onClick:()=>I(b),children:"Cargar imagen"}),e.jsx(M,{colorScheme:"red",onClick:()=>A(),children:"Cancelar"})]})]})]})]})},Wt=()=>{const[s,i]=x.useState(""),[c,d]=x.useState(!1),[y,g]=x.useState(!1),j=ae(),[C,p]=x.useState({id:ue(),title:"",marca:"",price:0,description:"",category:"FLORES",subCategory:"ROSAS",tags:"De temporada",stock:0,image:"",instrucciones:[],Recomendaciones:[]}),b=ze(),D=()=>{b("/admin/add"),window.location.reload()},w=O=>b(`/products/${O}`),_=async O=>{try{console.log("Productos",O);const v=await Ze(O);console.log(v),i(v),j({title:"Producto subido correctamente",duration:2e3,status:"success",position:"top-right"})}catch{j({title:"El producto no se subido correctamente",duration:2e3,status:"error",position:"top-right"})}};return e.jsx(E,{minHeight:"72.8vh",placeContent:"center",bgColor:"gray.200",children:e.jsxs(Xe,{h:"auto",paddingBottom:"2%",bgColor:"gray.200",gap:4,children:[e.jsx(We,{children:e.jsx("title",{children:"Agregar producto"})}),e.jsx(Ye,{my:4,children:"Añadir un producto"}),e.jsx(E,{w:[350,450,550,650],bgColor:"white",p:5,borderRadius:"xl",boxShadow:"xs",children:c===!1?e.jsx(e.Fragment,{children:e.jsx(bt,{setValue:p,setStep1:d,values:C})}):y===!1?e.jsxs(e.Fragment,{children:[e.jsx(xt,{setValue:p,values:C}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(M,{onClick:()=>d(!1),children:"Atrás"}),e.jsx(M,{onClick:()=>g(!0),children:"Siguiente"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(_t,{values:C,setValue:p,setStep2:g}),e.jsx(M,{display:s.length>0?"none":"block",colorScheme:"blue",width:"100%",isDisabled:!(C.image.length>0),type:"submit",mb:2,onClick:()=>_(C),children:"Agregar producto"}),e.jsx(M,{colorScheme:"blue",width:"100%",display:s.length>0?"block":"none",mb:2,onClick:()=>w(s),children:"Ver producto"}),e.jsx(M,{colorScheme:"linkedin",width:"100%",display:s.length>0?"block":"none",mb:2,onClick:()=>D(),children:"Ingresar otro producto"})]})})]})})};export{Wt as default};
