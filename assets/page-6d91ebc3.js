import{r as h,j as t,B as d,S,T as c,a9 as k,aN as w,y as f,a4 as u,a2 as p,a3 as i,an as x,aQ as D,aP as g,aW as E,aX as b}from"./index-d0bb2854.js";import{A as I}from"./chunk-WPAIWTI3-a4077d1e.js";const F=()=>{const[n,m]=h.useState([{checked:!1,comment:"",createdAt:"",fatherSurname:"",name:"",product:"",id:"",deleted:!1}]),C=async e=>{const s=n.map(a=>{if(a.id===e){const o={...a};return o.checked=!o.checked,o}return a});m(s);try{const a=u(p(i,"comments")),o=await x(a);o.empty?console.log('No se encontraron documentos en la colecciÃ³n "comments"'):o.forEach(r=>{const l=r.data();l.id===e&&(D(g(i,"comments",r.id),{checked:!l.checked}),console.log("Comentario actualizado en Firebase"))})}catch(a){console.error("Error al actualizar el comentario en Firebase",a)}},y=async e=>{const s=n.filter(a=>a.id!==e);m(s);try{const a=u(p(i,"comments")),o=await x(a);o.empty?console.log('No se encontraron documentos en la colecciÃ³n "comments"'):o.forEach(r=>{r.data().id===e&&(E(g(i,"comments",r.id)),console.log("Comentario eliminado de Firebase"))})}catch(a){console.error("Error al eliminar el comentario en Firebase",a)}};return h.useEffect(()=>{(async()=>{const s=await b();m(s)})()},[]),t.jsxs(d,{style:{minHeight:"72.7vh"},id:"container comments",className:"w-[85%] mx-auto mt-8 gap-5 overflow-auto",children:[t.jsx(S,{mt:2,textAlign:"center",children:"Comentarios"}),t.jsx(d,{style:{display:"flex",width:"100%",flexWrap:"wrap",justifyContent:"space-around"},children:n.length===0?t.jsx(c,{fontSize:"2xl",mt:6,children:"No hay comentarios para mostrar"}):n==null?void 0:n.map(e=>t.jsxs(d,{p:4,marginY:"20px",borderRadius:"md",bgColor:"gray.100",minWidth:["full",350],maxWidth:["full",350],children:[t.jsxs(k,{direction:"row",alignItems:"center",children:[t.jsx(I,{src:"",name:"commentInfo?.name"}),t.jsxs(c,{fontWeight:600,children:[e.name," ",e.fatherSurname]})]}),t.jsx(c,{noOfLines:3,my:2,children:e.comment}),t.jsxs(c,{fontWeight:600,children:["Fecha: ",new Date().toLocaleDateString()]}),t.jsxs(w,{spacing:6,mt:2,children:[t.jsx(f,{colorScheme:"purple",onClick:()=>C(e.id),children:e.checked===!1?"Agregar":"Cancelar"}),t.jsx(f,{colorScheme:"purple",onClick:()=>y(e.id),children:"Eliminar"})]})]},e.id))})]})};export{F as default};
